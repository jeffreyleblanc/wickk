/*! Wickk | copyright (2012) Jeffrey LeBlanc LLC, www.jeffreyleblanc.org | all rights reserved */
function ifin(b,a){for(i in a){if(b==a[i]){return true}}return false}Array.prototype.remove=function(c){var a,b;if((a=this.indexOf(c))>-1){return([].splice.apply(this,[a,a-a+1].concat(b=[])),b)}};Array.prototype.last=function(){return this[this.length-1]};function makeJO(a){if(a==null){return null}else{if(typeof a=="string"){return $.parseJSON(a);this.createLineFromJson(this,jO)}else{return a}}}function sync(c,b){for(var a in c){if(a in b){if($.type(c[a])==="object"){sync(c[a],b[a])}else{c[a]=b[a]}}}}function isEmpty(b){for(var a in b){if(b.hasOwnProperty(a)){return false}return true}}var $cE=null;function C(b){var c=$.type(b);if(ifin(c,["object","array"])){Cappend($.dump(b))}else{Cappend(b)}}function Cappend(a){console.log(a)}var base62alphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function b62ify(a){a=parseInt(a);var b="";while(a!=0){b=base62alphabet[a%62]+b;a=parseInt(a/62)}return b}function time62(){return b62ify(new Date().getTime())}var global_millis=new Date().getTime();var global_elapsedFrm_millis=0;function update_millis(){var a=new Date().getTime();global_elapsedFrm_millis=a-global_millis;global_millis=a}function millis(){return global_millis}function Emillis(){return global_elapsedFrm_millis}(function(a){a.atype=function(b){var c=a.type(b);if(c==="object"){if(a.isFunction(b.ISatype)){return b.type()}}else{if(c==="number"){return(b%1==0)?"int":"float"}}return c};a.ISatype=function(b){var c=a.type(b);if(c==="object"){if(a.isFunction(b.ISatype)){return true}}return false};a.isDerivedFrom=function(c,b){if(!a.ISatype(c)){return false}return c.$derivedFrom(b)};a.isDef=function(b){return !(b===undefined)};a.C=function(b){if(ifin(a.type(b),["object","array"])){console.log(a.dump(b))}else{console.log(b)}}})(jQuery);
/*! Classy - classy classes for JavaScript :copyright: (c) 2011 by Armin Ronacher. :license: BSD.
* -- Modified by Jeffrey LeBlanc LLC, www.jeffreyleblanc.org */
(function(d){var e="1.4.wickk",l=this,c=l.Class,b=false;var j=(function(){$super()}).toString().indexOf("$super")>0;function h(n){return !j||/\B\$super\b/.test(n.toString())}function g(p,n,o){if(o===d){delete p[n]}else{p[n]=o}}function m(o,n){return Object.prototype.hasOwnProperty.call(o,n)?o[n]:d}function f(n){b=true;var o=new n;b=false;return o}var a=function(){};a.$noConflict=function(){try{g(l,"Class",c)}catch(n){l.Class=c}return a};a.$classyVersion=e;a.$extend=function(s){var r=this.prototype;var t=f(this);var q=$.extend(true,{},s);var p=false;if(s.__isPrimitive__){p=true}s.__classvars__=s.__classvars__||{};if(t.__classvars__){for(var v in t.__classvars__){if(!s.__classvars__[v]){var u=m(t.__classvars__,v);s.__classvars__[v]=u}}}s.__classvars__.$count=0;if(!p){s.__classvars__.$p=q}if(!p){s.__classvars__.$parent=(l===r)?null:r}for(var n in s){var u=m(s,n);if(n==="__include__"||u===d){continue}t[n]=(typeof u==="function"&&h(u))?(function(w,x){return function(){var y=m(this,"$super");this.$super=r[x];try{return w.apply(this,arguments)}finally{g(this,"$super",y)}}})(u,n):u}var o=function(){if(b){return}var w=(l===this)?f(arguments.callee):this;w.$class=o;if(w.__init__){w.__init__.apply(w,arguments)}return w};for(var v in s.__classvars__){var u=m(s.__classvars__,v);if(u!==d){o[v]=u}}o.prototype=t;o.constructor=o;o.$extend=a.$extend;o.$withData=a.$withData;o.$lineage=a.$lineage(o);return o};a.$lineage=function(n){var o=[];n=(n.$class)?n.$class.$parent:n.$parent;while(n.__classvars__){o.push({aType:n.__classvars__.aType,rv:n});n=n.__classvars__.$parent}return o};a.$commonAncestor=function(q,p){l1=q.$lineage;l2=p.$lineage;var r=null;for(var o=0;o<l1.length;o++){for(var n=0;n<l2.length;n++){if(l1[o].aType==l2[n].aType){r=l1[o];break}}if(r!=null){break}}return r};a.$getFusePath=function(q,p){l1=q.$lineage;l2=p.$lineage;var s=[];var r=null;for(var o=0;o<l1.length;o++){for(var n=0;n<l2.length;n++){if(l1[o].aType==l2[n].aType){r=l1[o];break}s.push(l2[n])}if(r!=null){break}s.push(l2[o])}return s};a.$fuse=function(o,p){var q=o[0];for(var n=1;n<o.length;n++){q=q.$extend(o[n].$p)}if($.isDef(p)){q=q.$extend(p)}return q};l.Class=a})();
/*! End Classy */
(function(){var a=this;a.aEntry=Class.$extend({__init__:function(b,c){this.idref=b||"";this.ptr=c||null}});a.aRegistry=Class.$extend({__init__:function(){this.Registry=new Array()},clear:function(){var b=this;b.Registry.splice(0,b.Registry.length)},printRegistry:function(){var b=this;$.each(b.Registry,function(d,c){C(c.idref+" : "+c.ptr.id())})},register:function(c){var b=this;if(!$.ISatype(c)){return null}b.Registry.push(new aEntry(c.id(),c))},registerAs:function(d,b){var c=this;if(!$.ISatype(d)){return null}c.Registry.push(new aEntry(b,d))},updateId:function(b,c){var d=this;var e=null;$.each(d.Registry,function(g,f){if(f.idref==b){e=f;return false}});if(e!=null){e.idref=c}},deregister:function(d){var c=this;if(!($.type(d)==="string")){if($.ISatype(d)){d=d.id()}else{return false}}var b=false;$.each(c.Registry,function(f,e){if(e.idref==d){c.Registry.remove(e);b=true;return false}});return b},retrieve:function(d){var c=this;if(!($.type(d)==="string")){return null}var b=null;$.each(c.Registry,function(f,e){if(e.idref==d){b=e.ptr;return false}});return b},makeFilter:function(b){var c=this;if(!$.isDef(b)){return null}var d=null;if($.atype(b)=="function"){d={type:"function",fnc:b,arg:""}}else{if($.atype(b)=="string"){if(b[0]=="#"){b=b.substr(1);d={type:"id",fnc:function(e){return(e.id()==b)},arg:b}}else{if(b[0]=="$"){b=b.substr(1);d={type:"type",fnc:function(e){return(e.type()==b)},arg:b}}}}}return d},scan:function(b,e){var c=this;var d=[];b=c.makeFilter(b);if(b==null){return[]}if(b.type=="id"){d.push(c.retrieve(b.arg))}else{$.each(c.Registry,function(g,f){vp=f.ptr;if(b.fnc(vp)){d.push(vp)}})}if($.isDef(e)){$.each(d,function(g,f){e(f)})}return d},act:function(b,d){var c=this;if(!$.isDef(b)&&!$.isDef(d)){return}b=c.makeFilter(b);if(b==null){return}if(b.type=="id"){var e=c.retrieve(b.arg);if(e!=null){d(e)}}else{$.each(c.Registry,function(g,f){vp=f.ptr;if(b.fnc(vp)){d(vp)}})}}})}).call(this);(function(){var a=this;a.launchWickk=function(){a.$a=a.aSeed.CMN=new aCommon()};a.aSeed=Class.$extend({__classvars__:{aType:"aSeed",CMN:null},__init__:function(){},CMN:function(){return aSeed.CMN},type:function(){try{return this.$class.aType}catch(b){return"none"}},ISatype:function(){return true},$parentType:function(){return($.isDef(this.$class.$parent.__classvars__))?this.$class.$parent.__classvars__.aType.toString():"none"},$derivedFrom:function(b,c){if(c==undefined){var c=true}if(c&&$.atype(b)=="string"){if(b==this.type()){return true}}var d=false;$.each(this.$class.$lineage,function(g,f){if($.atype(b)=="string"){if(b==f.aType){d=true;return false}}else{if($.ISatype(b)){if(b.type()==f.aType){d=true;return false}}else{try{if(b.aType==f.aType){d=true;return false}}catch(h){}}}});return d}})}).call(this);(function(){var a=this;a.aList=function(){if(!(this instanceof arguments.callee)){return new arguments.callee()}this.L=new Array()};a.aList.prototype={type:function(){return"aList"},ISatype:function(){return true},size:function(){var b=this;return b.L.length},setpO:function(b){},add:function(c){var b=this;if(!$.ISatype(c)){return null}b.L.push(c);return c},addAt:function(d,b){var c=this;if(!$.ISatype(d)){return null}if(b>0&&b<c.L.length){c.L.splice(i,0,d)}else{c.add(d)}return d},rem:function(c){var d=this;var b,e=false;if($.atype(c)=="int"){if(c>-1&&c<d.L.length){d.L.splice(c,1)}}else{for(b=d.L.length;b>-1&&!e;b--){if(d.L[b]==c){d.L.splice(b,1);e=true}}}return d},clear:function(){var b=this;b.L.splice(0,b.L.length);return b},at:function(b){var c=this;if(b>-1*(c.L.length+1)&&b<c.L.length){return c.L[(b>-1)?b:c.L.length+b]}else{return undefined}},find:function(e){var c=this;if(!$.ISatype(e)){return null}var b,d=false;for(b=c.L.length;b>-1&&!d;b--){if(c.L[b]==e){d=true}}return(d)?e:null},each:function(d){var e=this;var c,b;for(c=0;c<e.L.length;c++){b=e.L[c];if(b.type()!="aList"){if(d(c,b)==false){break}}else{b.each(d)}}return e},each_reverse:function(d){var e=this;var c,b;for(c=e.L.length-1;c>-1;c--){b=e.L[c];if(b.type()!="aList"){if(d(c,b)==false){break}}else{b.each_reverse(d)}}return e},convolute:function(d){var e=this;for(var c=0;c<e.L.length;c++){for(var b=c+1;b<e.L.length;b++){d(e.L[c],e.L[b],c,b)}}return e},j:function(){var c=this;var b=[];c.each(function(e,d){b.push(d.id())});return b}}}).call(this);(function(){var root=this;root.$a;root.aCommon=Class.$extend({__classvars__:{user:"User"},__init__:function(user){var Q=this;Q.Registry=new aRegistry();Q.msgLIST=new aList();Q.user=user||"User"},create:function(json,flag){var Q=this;if(json==undefined){return null}json=makeJO(json);var initFlag=flag||"recreate";var TmpObj=eval("new "+json.aType+"(json,initFlag)");TmpObj.link();return TmpObj},clone:function(json,flag){var Q=this;if(!$.isDef(json)){return null}json=makeJO(json);var initFlag=flag||"clone";var newO=eval("new "+json.aType+"(json,initFlag)");newO.setid(newO.makeid());try{var tmpReg=newO.genHookRegistry();newO.link(tmpReg);if(initFlag=="clone"){newO.link()}}catch(e){C("ERR: clone linking failed in aCommon.clone()")}return newO},scan:function(filterFnc,actionFnc){var Q=this;return Q.Registry.scan(filterFnc,actionFnc)},act:function(filterFnc,actionFnc){var Q=this;return Q.Registry.act(filterFnc,actionFnc)},find:function(id_){var Q=this;return Q.Registry.retrieve(id_)},killMSGs:function(){var Q=this;Q.msgLIST.each_reverse(function(m){m.tgt.hasMSG=false;m.fnc=function(){};m.del()})}})}).call(this);(function(){var root=this;root.aObj=aSeed.$extend({__classvars__:{aType:"aObj"},__init__:function(a,initFlag){var Q=this;Q.$super();if(!$.isDef(initFlag)){var initFlag=""}Q.pO=null;Q.cO=new aList();Q.P={};Q.U={};Q.id_=null;if(initFlag!="recreate"){Q.setid(Q.makeid())}Q.$class.$count++;Q.fromdb=false;Q.dbPK=null;Q.altered=false;Q.user=null;Q.jsonHook=null;Q.serializableByParent=true;Q.setByJson=false;Q.initialize((initFlag=="")?a:undefined);if(initFlag!=""&&$.isDef(a)){Q.setBy(a,initFlag)}Q.postInitialize();return Q},initialize:function(){},postInitialize:function(){},setBy:function(a,initFlag){var Q=this;if(!$.isDef(a)){return}Q.setByJson=true;a=makeJO(a);if(initFlag=="recreate"){Q.setid(($.isDef(a.id))?a.id:Q.makeid())}Q.setP(a.P);if($.isDef(a.children)){$.each(a.children,function(k,v){try{var TmpObj=eval("new "+v.aType+"(v,initFlag)");Q.addC(TmpObj)}catch(e){C("child error in SetBy:"+Q.id())}})}Q.jsonHook=a;return Q},link:function(reg){var Q=this;if(Q.jsonHook){if(!$.isDef(reg)){var reg=Q.CMN().Registry}Q.cO.each(function(i,p){if(p!=null){p.link(reg)}});for(k in Q.jsonHook.U){if(Q.jsonHook.U[k]==null){Q.U[k]=null;continue}else{if($.atype(Q.jsonHook.U[k])==="string"){Q.U[k]=reg.retrieve(Q.jsonHook.U[k]);if(Q.U[k]!=null){delete Q.jsonHook.U[k]}}else{$.each(Q.jsonHook.U[k],function(key,val){var tmpLink=reg.retrieve(val);Q.U[k].add(tmpLink);if(tmpLink!=null){delete Q.jsonHook.U[k][key]}})}}}Q.postLink()}},postLink:function(){var Q=this},clone:function(noLinking){var Q=this;var initFlag=(noLinking)?"cloneShallow":"clone";var newO=eval("new "+this.type()+"(this.j(),initFlag)");newO.setid(newO.makeid());try{var tmpReg=newO.genHookRegistry();newO.link(tmpReg);if(initFlag=="clone"){newO.link()}}catch(e){C("ERR: "+this.id()+" clone linking failed")}return newO},genHookRegistry:function(){var Q=this;var reg=new aRegistry();Q.recurseC(function(ptr){if($.isDef(ptr.jsonHook)){if(ptr.jsonHook!=null){if($.isDef(ptr.jsonHook.id)){reg.registerAs(ptr,ptr.jsonHook.id)}}}});return reg},del:function(){var Q=this;if(Q.pO!=null){Q.pO.remC(Q)}Q.CMN().Registry.deregister(Q);Q.clearC()},delDeep:function(){var Q=this;if(Q.pO!=null){Q.pO.remC(Q)}Q.CMN().Registry.deregister(Q);Q.delAllC()},id:function(){return this.id_},makeid:function(){var Q=this;if(Q.user==null){Q.user=Q.CMN().user}return Q.CMN().user+"-"+time62()+"+"+Q.$class.aType+"#"+Q.$class.$count},setid:function(id){var old_id=this.id_;var registeredYet=(old_id==null)?false:true;this.id_=id;if(!registeredYet){this.CMN().Registry.register(this)}else{this.CMN().Registry.updateId(old_id,this.id())}},ISfromdb:function(){var Q=this;return Q.fromdb},SETfromdb:function(state){var Q=this;Q.fromdb=state},saveToDB:function(){},updateDB:function(){},deleteFromDB:function(){},setpO:function(ptr){var Q=this;Q.pO=ptr},getpO:function(){var Q=this;return(Q.pO)?Q.pO:null},getpOid:function(){var Q=this;return(Q.pO)?Q.pO.id():"null"},addC:function(ptr,serializable){var Q=this;Q.cO.add(ptr);ptr.setpO(Q);if(!(serializable===undefined)){ptr.serializableByParent=serializable}return ptr},remC:function(ptr){var Q=this;if(Q.cO.rem(ptr)){ptr.setpO(null)}},delC:function(ptr){var Q=this;if(Q.hasC(ptr)){ptr.del()}},clearC:function(){var Q=this;Q.cO.each(function(i,v){v.pO=null});Q.cO.clear()},delAllC:function(){var Q=this;Q.cO.each_reverse(function(i,v){v.delDeep()});Q.cO.clear()},hasC:function(ptr){var Q=this;return(Q.cO.find(ptr))?true:false},numC:function(){var Q=this;return Q.cO.size()},eachC:function(fnc){this.cO.each(function(i,c){fnc(i,c)})},each_reverseC:function(fnc){this.cO.each_reverse(function(i,c){fnc(i,c)})},recurseC:function(fnc){fnc(this);this.cO.each(function(i,c){c.recurseC(fnc)})},jC:function(){var Q=this;return Q.cO.j()},jCj:function(){var Q=this;var out=[];Q.cO.each(function(i,e){if(e.serializableByParent){out.push(e.jO())}});return out},jU:function(){var Q=this;var tmpU={};var count=0;for(k in Q.U){if(Q.U[k]!=null){if(Q.U[k].type()!="aList"){tmpU[k]=Q.U[k].id()}else{tmpU[k]=Q.U[k].j()}}else{tmpU[k]=null}count++}return tmpU},jP:function(){var Q=this;return Q.P},jO:function(){var Q=this;var Uid={timecreated:Q.timecreated,index:Q.index,user:Q.user};return $.extend({},{aType:Q.type(),id:Q.id()},Uid,{parent:Q.getpOid(),children:Q.jCj()},{P:Q.jP()},{U:Q.jU()})},j:function(pretty){var Q=this;return JSON.stringify(Q.jO(),null,pretty||"")},setP:function(a){if(!a){return}var Q=this;var syncSrc=($.ISatype(a))?a.P:(($.atype(a)==="object")?a:(($.atype(a)==="string")?$.parseJSON(a):null));if(syncSrc){sync(Q.P,syncSrc)}return Q},inP:function(name,a){var Q=this;if(Q.P[name]!=undefined){if(Q[name]!=undefined){if(a==undefined){return Q[name]()}else{Q[name](a)}}else{if(a==undefined){return Q.P[name]}else{if($.atype(Q.P[name])==="object"){sync(Q.P[name],a)}else{Q.P[name]=a}}}}else{return undefined}},})}).call(this);$.fn.x=function(a){if(a){return this.css("left",a)}else{return this.offset().left}};$.fn.y=function(a){if(a){return this.css("top",a)}else{return this.offset().top}};$.fn.xy=function(a){if(a){return this.css({left:a.x,top:a.y})}else{return{x:this.offset().left,y:this.offset().top}}};$.fn.w=function(a){if(a){return this.width(a)}else{return this.width()}};$.fn.h=function(a){if(a){return this.height(a)}else{return this.height()}};$.fn.wh=function(a){if(a){this.width(a.x);return this.height(a.y)}else{return{x:this.width(),y:this.height()}}};$.fn.centerInWindow=function(c,b){var a={x:(c||0.5)*($(window).w()-this.w()),y:(b||0.5)*($(window).h()-this.h())};this.xy(a)};(function(a){a.nowAndOnResize=function(b){b();a(window).resize(function(){b()})}})(jQuery);Math.TWOPI=2*Math.PI;Math.ONEBPM=(2*Math.PI)/60000;Math.roundFloat=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)};Math.fMod=function(c,b){var a=Math.floor(c/b);return c-a*b};Math.toTWOPI=function(a){return Math.fMod(a,Math.TWOPI)};Math.truA=function(a){if(a<0){a=-1*a}else{a=Math.TWOPI-a}if(a>Math.TWOPI){a=a-MATH.TWOPI}return a};Math.angeldiff=function(c,b){var a=c-b;if(a>Math.PI){a-=2*Math.PI}if(a<-1*Math.PI){a+=2*Math.PI}return a};Math.randomRange=function(b,a){return b+(a-b)*Math.random()};Math.linearTween=function(e,a,g,f){return g*e/f+a};Math.easeInQuad=function(e,a,g,f){e/=f;return g*e*e+a};Math.easeOutQuad=function(e,a,g,f){e/=f;return -g*e*(e-2)+a};Math.easeInOutQuad=function(e,a,g,f){e/=f/2;if(e<1){return g/2*e*e+a}e--;return -g/2*(e*(e-2)-1)+a};Math.easeInCubic=function(e,a,g,f){e/=f;return g*e*e*e+a};Math.easeOutCubic=function(e,a,g,f){e/=f;e--;return g*(e*e*e+1)+a};Math.easeInOutCubic=function(e,a,g,f){e/=f/2;if(e<1){return g/2*e*e*e+a}e-=2;return g/2*(e*e*e+2)+a};Math.easeInSine=function(e,a,g,f){return -g*Math.cos(e/f*(Math.PI/2))+g+a};Math.easeOutSine=function(e,a,g,f){return g*Math.sin(e/f*(Math.PI/2))+a};Math.easeInOutSine=function(e,a,g,f){return -g/2*(Math.cos(Math.PI*e/f)-1)+a};Math.easeInExpo=function(e,a,g,f){return g*Math.pow(2,10*(e/f-1))+a};Math.easeOutExpo=function(e,a,g,f){return g*(-Math.pow(2,-10*e/f)+1)+a};Math.easeInOutExpo=function(e,a,g,f){e/=f/2;if(e<1){return g/2*Math.pow(2,10*(e-1))+a}e--;return g/2*(-Math.pow(2,-10*e)+2)+a};Math.easeInCirc=function(e,a,g,f){e/=f;return -g*(Math.sqrt(1-e*e)-1)+a};Math.easeOutCirc=function(e,a,g,f){e/=f;e--;return g*Math.sqrt(1-e*e)+a};Math.easeInOutCirc=function(e,a,g,f){e/=f/2;if(e<1){return -g/2*(Math.sqrt(1-e*e)-1)+a}e-=2;return g/2*(Math.sqrt(1-e*e)+1)+a};Math.cosPulse=function(a){return 0.5-0.5*Math.cos(2*Math.PI*a)};Math.gaussPulse=function(a,b){return Math.pow(Math.E,-1*((a-0.5)*(a-0.5)/(2*b*b)))};(function(){var a=this;a.vCanvasRenderer={ctx:null,bindCtx:function(b){this.ctx=b;return this},setDefaultFont:function(b){this.ctx.font=b;return this},lnTo:function(b){this.ctx.lineTo(b.x,b.y)},mvTo:function(b){this.ctx.moveTo(b.x,b.y)},line:function(f,e,b,d,c){this.ctx.beginPath();this.ctx.moveTo(f.x,f.y);this.ctx.lineTo(e.x,e.y);this.ctx.strokeStyle=b||"rgb(0,0,0)";this.ctx.lineWidth=d||1;this.ctx.lineCap=c||"round";this.ctx.stroke();this.ctx.closePath()},lineInc:function(f,e,b,d,c){this.line(f,f.addN(e),b,d,c)},circle:function(b,f,d,c,e){this.ctx.beginPath();this.ctx.arc(b.x,b.y,f||10,0,Math.TWOPI,false);if(d){this.ctx.fillStyle=d||"rgb(0,0,0)";this.ctx.fill()}if(c){this.ctx.strokeStyle=c||"rgb(0,0,0)";this.ctx.lineWidth=e||1;this.ctx.stroke()}this.ctx.closePath()},ellipse:function(b,j,d,f,e,c){if(j==d){this.circle(b,j,f,e,c);return}var g=Math.max(j,d);var l=j/g;var h=d/g;this.ctx.save();this.ctx.scale(l,h);this.ctx.beginPath();this.ctx.arc(b.x,b.y,g,0,Math.TWOPI,false);if(f){this.ctx.fillStyle=f||"rgb(0,0,0)";this.ctx.fill()}if(e){this.ctx.strokeStyle=e||"rgb(0,0,0)";this.ctx.lineWidth=c||1;this.ctx.stroke()}this.ctx.closePath();this.ctx.restore()},rect:function(e,c,g,d,b,f){this.ctx.beginPath();this.ctx.rect(e.x,e.y,c,g);if(d){this.ctx.fillStyle=d||"rgb(0,0,0)";this.ctx.fill()}if(b){this.ctx.strokeStyle=b||"rgb(0,0,0)";this.ctx.lineWidth=f||1;this.ctx.stroke()}this.ctx.closePath()},rectCenter:function(e,c,g,d,b,f){this.ctx.beginPath();this.ctx.rect(e.x-c/2,e.y-g/2,c,g);if(d){this.ctx.fillStyle=d||"rgb(0,0,0)";this.ctx.fill()}if(b){this.ctx.strokeStyle=b||"rgb(0,0,0)";this.ctx.lineWidth=f||1;this.ctx.stroke()}this.ctx.closePath()},shape:function(b,e,c,g){this.ctx.beginPath();var f=b.length;if(f<1){return}this.mvTo(b[0]);for(var d=1;d<f;d++){this.lnTo(b[d])}if(e){this.ctx.fillStyle=e||"rgb(0,0,0)";this.ctx.fill()}if(c!=undefined){this.ctx.strokeStyle=c||"rgb(0,0,0)";this.ctx.lineWidth=g||1;this.ctx.stroke()}this.ctx.closePath()}}}).call(this);(function(){var a=this;a.vVec=function(b,d,c){if(!(this instanceof arguments.callee)){return new arguments.callee(b,d,c)}this.x=b||0;this.y=d||0;this.z=c||0};a.vVec.$class={dot:function(c,b){return c.x*b.x+c.y*b.y+c.z*b.z},midPoint:function(c,b){return new vVec((c.x+b.x)/2,(c.y+b.y)/2,(c.z+b.z/2))},tangentAlong:function(e,c,d){var b=e.copy().sub(c);return b.mult(d||1)},project:function(e,b){var d=vVec.dot(e,b);var c=vVec.dot(e,e);return e.copy().mult(d/c)}};a.vVec.prototype={type:function(){return"vVec"},ISatype:function(){return true},copy:function(){return new vVec(this.x,this.y,this.z)},set:function(c,b,d){if($.atype(c)=="vVec"){return this.setV(c)}else{if($.atype(c)=="object"){return this.setEVT(c)}else{return this.setXYZ(c,b,d)}}},setXYZ:function(b,d,c){this.x=b||this.x;this.y=d||this.y;this.z=c||this.z;return this},setV:function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this},setEVT:function(b){this.x=b.pageX;this.y=b.pageY;return this},zero:function(){this.x=this.y=this.z=0;return this},equals:function(b){var c=this;return((c.x==b.x)&&(c.y==b.y)&&(c.z==b.z))},almostEquals:function(c,d){var b=d||0.05;return(distanceSquaredApart(c)<b*b)},add:function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addXYZ:function(b,d,c){this.x+=b||0;this.y+=d||0;this.z+=c||0;return this},addN:function(b){return new vVec(this.x+b.x,this.y+b.y,this.z+b.z)},sub:function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subXYZ:function(b,d,c){this.x-=b||0;this.y-=d||0;this.z-=c||0;return this},subN:function(b){return new vVec(this.x-b.x,this.y-b.y,this.z-b.z)},mult:function(b){this.x*=b;this.y*=b;this.z*=b;return this},multN:function(b){return new vVec(this.x*b,this.y*b,this.z*b)},div:function(b){this.x/=b;this.y/=b;this.z/=b;return this},divN:function(b){return new vVec(this.x/b,this.y/b,this.z/b)},scale:function(b){this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},scaleN:function(b){return new vVec(this.x*b.x,this.y*b.y,this.z*b.y)},lngth:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},l:function(b){if(!b){return this.lngth()}else{return this.normalize().mult(b)}},lngthSquared:function(){return this.x*this.x+this.y*this.y+this.z*this.z},lSQ:function(b){if(!b){return this.lngthSquared()}else{return this.normalize().mult(Math.sqrt(b))}},normalize:function(){var b=this.lngth();if(b==0){b=0.00001}this.x/=b;this.y/=b;this.z/=b;return this},limit:function(b){if(this.lngthSquared()>b*b){this.normalize().mult(b)}return this},distanceApart:function(b){var c=this;return Math.sqrt((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y)+(c.z-b.z)*(c.z-b.z))},distanceSquaredApart:function(b){var c=this;return((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y)+(c.z-b.z)*(c.z-b.z))},rot:function(b){var d=this;if(!b){return Math.atan2(this.y,this.x)}else{if($.type(b)==="string"){if(b=="CW"){var e=d.x;d.x=d.y;d.y=-1*e}else{if(b=="CCW"){var e=d.x;d.x=-1*d.y;d.y=e}else{if(b=="180"){d.x*=-1;d.y*=-1}}}}else{var c=d.x*Math.cos(b)-d.y*Math.sin(b);d.y=d.x*Math.sin(b)+d.y*Math.cos(b);d.x=c}return this}},rotN:function(b){var c=this;return this.copy().rot(b)},setPolar:function(c,b){this.x=c*Math.cos(b);this.y=c*Math.sin(b);return this},segmentRadians:function(b){return this.copy().sub(b).radians()},randomizeBox:function(b){this.x=2*b*(Math.random()-0.5);this.y=2*b*(Math.random()-0.5);return this},randomizeCircle:function(b){return this.setPolar(b*Math.random(),Math.random()*Math.TWOPI)},print:function(){C("| "+this.x+" |");C("| "+this.y+" |");C("| "+this.z+" |")},p:function(){return"vVec( "+this.x+", "+this.y+", "+this.z+")"},j:function(){return'{ "aType":"vVec", "x": '+this.x+' ,"y": '+this.y+', "z":'+this.z+"}"},toJson:function(){return'{ "x": '+this.x+' ,"y": '+this.y+" }"},setByJson:function(b){var b=makeJO(b);this.x=b.x;this.y=b.y}}}).call(this);(function(){var a=this;a.vColor=function(f,e,c,d){if(!(this instanceof arguments.callee)){return new arguments.callee(f,e,c,d)}this.r=f||1;this.g=e||1;this.b=c||1;this.a=d||1;this.rgb="rgb(0,0,0";this.rgba="rgba(0,0,0,0)";this.flatten()};a.vColor.$class={mix:function(c,b){return new vColor((c.r+b.r)/2,(c.g+b.g)/2,(c.b+b.b)/2,1)},mixerize:function(e,d,c){var b=1-c;return new vColor(c*e.r+b*d.r,c*e.g+b*d.g,c*e.b+b*d.b,(e.a+d.a)/2)}};a.vColor.prototype={type:function(){return"vColor"},ISatype:function(){return true},copy:function(){return new vColor(this.r,this.g,this.b,this.a)},apply:function(b){return this.rgba},applyAfilter:function(b,c){if(c==undefined){var c=b}return"rgba"+this.rgb+","+(this.a*c)+")"},flatten:function(){var b="("+parseInt(this.r)+","+parseInt(this.g)+","+parseInt(this.b);this.rgb=b;this.rgba="rgba"+b+","+(this.a)+")";return this},R:function(b){if(b==undefined){return this.r}else{this.r=b;return this.flatten()}},G:function(b){if(b==undefined){return this.g}else{this.g=b;return this.flatten()}},B:function(c){if(c==undefined){return this.b}else{this.b=c;return this.flatten()}},A:function(b){if(b==undefined){return this.a}else{this.a=b;return this.flatten()}},RGBA:function(f,e,c,d){if(f==undefined){return this.rgba}else{this.r=f||1;this.g=e||1;this.b=c||1;this.a=d||1;return this.flatten()}},RGB:function(e,d,c){if(e==undefined){return"rgb"+this.rgb+")"}else{this.r=e||1;this.g=d||1;this.b=c||1;this.a=1;return this.flatten()}},STR:function(d){try{var b;if(d.indexOf("rgba(")==0){d=d.replace("rgba(","").replace(")","");var b=d.split(",")}else{if(d.indexOf("rgb(")==0){d=d.replace("rgb(","").replace(")","");var b=d.split(",");b.push(1)}else{return this}}this.r=parseInt(b[0]);this.g=parseInt(b[1]);this.b=parseInt(b[2]);this.a=parseFloat(b[3])}catch(c){}return this.flatten()},CLR:function(b){if(!b){return this.copy()}else{this.r=b.r;this.g=b.g;this.b=b.b;this.a=b.a;return this.flatten()}},randomize:function(b){if(!b){var b=255}this.r=b*Math.random();this.g=b*Math.random();this.b=b*Math.random();this.a=1;return this.flatten()},prettyRandomize:function(){this.r=255*randomRange(0.2,1);this.g=255*randomRange(0.2,1);this.b=255*randomRange(0.2,1);this.a=randomRange(0.3,0.9);return this.flatten()},print:function(){C("| "+this.r+" |");C("| "+this.g+" |");C("| "+this.b+" |");C("| "+this.a+" |")},j:function(){return'{ "aType":"vColor", "r": '+this.r+' ,"g": '+this.g+', "b":'+this.b+","+this.a+" }"},toJson:function(){return'{ "r": '+this.r+' ,"g": '+this.g+', "b":'+this.b+","+this.a+" }"},setByJson:function(b){var b=makeJO(b);this.r=b.r;this.g=b.g;this.b=b.b;this.a=b.a},equals:function(c){var b=this;return((b.r==c.r)&&(b.g==c.g)&&(b.b==c.b))},almostEquals:function(c,d){var b=d||0.05;return(distanceSquaredApart(c)<b*b)},add:function(b){this.r+=b.r;this.g+=b.g;this.b+=b.b;return this},add_xyz:function(e,d,c){this.r+=e||0;this.g+=d||0;this.b+=c||0;return this},sub:function(b){this.r-=b.r;this.g-=b.g;this.b-=b.b;return this},mult:function(b){this.r*=b;this.g*=b;this.b*=b;return this},div:function(b){this.r/=b;this.g/=b;this.b/=b;return this},lngthSquared:function(){return this.r*this.r+this.g*this.g+this.b*this.b},lngth:function(){return Math.sqrt(this.r*this.r+this.g*this.g+this.b*this.b)},distanceApart:function(b){var c=this;return Math.sqrt((c.r-b.r)*(c.r-b.r)+(c.g-b.g)*(c.g-b.g)+(c.b-b.b)*(c.b-b.b))},distanceSquaredApart:function(b){var c=this;return((c.r-b.r)*(c.r-b.r)+(c.g-b.g)*(c.g-b.g)+(c.b-b.b)*(c.b-b.b))},normalize:function(){var b=this.lngth();this.r/=b;this.g/=b;this.b/=b;return this},limit:function(b){if(this.lngthSquared()>b*b){this.normalize().mult(b)}return this}}}).call(this);(function(){var a=this;a.vTransform2D=function(g,f,l,h,e,j){if(!(this instanceof arguments.callee)){return new arguments.callee(g,f,l,h,e,j)}this.e=[[g||0,f||0,e||0],[l||0,h||0,j||0],[0,0,1]]};a.vTransform2D.$class={};a.vTransform2D.prototype={type:function(){return"vTransform2D"},ISatype:function(){return true},copy:function(){var b=this;return new vTransform2D(b.e[0][0],b.e[0][1],b.e[1][0],b.e[1][1],b.e[0][2],b.e[1][2])},setM:function(g,f,l,h,e,j){this.e[0][0]=g||0;this.e[0][1]=f||0;this.e[1][0]=l||0;this.e[1][1]=h||0;this.e[0][2]=e||0;this.e[1][2]=j||0;return this},setI:function(){var d=this;for(var c=0;c<d.e.length;c++){for(var b=0;b<d.e.length;b++){d.e[c][b]=(c==b)?1:0}}return this},setROT:function(b){var e=this;var f=Math.cos(b);var d=Math.sin(b);e.e[0][0]=f;e.e[0][1]=-1*d;e.e[1][0]=d;e.e[1][1]=f;return this},setSCL:function(d,c){var b=this;b.e[0][0]=d;b.e[0][1]=0;b.e[1][0]=0;b.e[1][1]=c;return this},setXY:function(b){this.e[0][2]=b.x;this.e[1][2]=b.y;return this},applyToCTX:function(b){var c=this;b.transform(c.e[0][0],c.e[0][1],c.e[1][0],c.e[1][1],c.e[0][2],c.e[1][2])},apply_v:function(c){var d=this;var b=new vVec();b.x=d.e[0][0]*c.x+d.e[0][1]*c.y+d.e[0][2];b.y=d.e[1][0]*c.x+d.e[1][1]*c.y+d.e[1][2];b.z=c.z;return b},x:function(j){var f=this;var g=new vTransform2D();for(var e=0;e<3;e++){for(var h=0;h<3;h++){var d=0;for(var b=0;b<3;b++){d+=f.e[e][b]*j.e[b][h]}g.e[e][h]=d}}return g},apply_as_inverse:function(d){var g=this;var f=g.e[0][0]*g.e[1][1]-g.e[0][1]*g.e[1][0];if(f==0){return null}var e=d.x-g.e[0][2];var c=d.y-g.e[1][2];var b=new vVec();f=1/f;b.x=f*(g.e[1][1]*e-g.e[0][1]*c);b.y=f*(g.e[0][0]*c-g.e[1][0]*e);return b},print:function(){var c=this;for(var b=0;b<c.e.length;b++){C("| "+c.e[b][0]+","+c.e[b][1]+","+c.e[b][2]+" |")}}}}).call(this);(function(){var a=this;a.vEvent=function(b){if(!(this instanceof arguments.callee)){return new arguments.callee(b)}this.etype="";this.$je=b||null;this.spatial=false;this.gpos=vVec();this.lpos=vVec();this.global=false;this.mDown=false};a.vEvent.$class={};a.vEvent.prototype={ISatype:function(){return true},type:function(){return"vEvent"},cleanType:function(){return this.etype.replace("_","")}}}).call(this);(function(){var a=this;a.vObjBase=aObj.$extend({__classvars__:{aType:"vObjBase",defaultHandlersMade:false,defaultHandlers:{}},initialize:function(){var b=this;b.$super();b.ctx=null;b.cvns=null;b.rndr=null;b.infoPtr=null;b.P.pos=new vVec();b.P.rot=0;b.P.scl=new vVec(1,1);b.TRS={pos:true,rot:false,scl:false};b.TF=new vTransform2D();b.TF.setI();b.gTF=new vTransform2D();b.gTF.setI();b.grabPnt=new vVec();b.UserControlled=false;b.mouseInside=false;b.draggable=false;b.handlers={};b.lastdownT=0;b.lastclickT=0;b.clickT=200;b.dblclickT=600;b.clickCB=null;b.lastdownPos=vVec();b.P.alpha=1;b.alphaTree=1;b.visible=true;b.attachDefaultHandlers()},setCnvs:function(c){var b=this;b.cnvs=c;b.ctx=(b.cnvs)?b.cnvs.ctx:null;b.rndr=(b.cnvs)?b.cnvs.rndr:null;b.eachC(function(d,f){if(f.setCnvs){f.setCnvs(c)}})},addC:function(d,b){this.$super(d,b);try{d.setCnvs(this.cnvs)}catch(c){}},renderTree:function(c){var b=this;if(b.ctx==null||b.visible==false){return}b.ctx.save();b.TF.setI();b.TF.setXY(b.P.pos);if(b.TRS.rot){b.TF.setROT(-b.P.rot)}if(b.TRS.scl){b.TF=b.TF.x(vTransform2D().setSCL(b.P.scl.x,b.P.scl.y))}b.gTF=c.x(b.TF);c=b.gTF.copy();b.ctx.translate(b.P.pos.x,b.P.pos.y);if(b.TRS.rot){b.ctx.rotate(-1*b.P.rot)}if(b.TRS.scl){b.ctx.scale(b.P.scl.x,b.P.scl.y)}b.alphaTree=b.P.alpha;if(b.pO){b.alphaTree*=b.pO.alphaTree}b.ctx.globalAlpha=b.alphaTree;b.renderBefore();b.render();b.renderAfter();b.eachC(function(d,f){f.renderTree(c)});b.ctx.restore()},render:function(){},renderBefore:function(){},renderAfter:function(){},renderDebug:function(){var b=this;b.ctx.fillStyle="rgba(0, 255, 0, 0.5)";b.ctx.beginPath();b.ctx.rect(-4,-4,8,8);b.ctx.fill();b.ctx.closePath();b.ctx.strokeStyle="rgba(255, 255, 0, 0.75)";b.ctx.lineWidth=1;b.ctx.beginPath();b.ctx.moveTo(0,0);b.ctx.lineTo(0,-10);b.ctx.stroke();b.ctx.closePath()},alpha:function(b){var c=this;if(b==undefined){return c.P.alpha}else{c.P.alpha=b}},updateTree:function(){var b=this;b.update();b.eachC(function(c,d){d.updateTree()});b.postUpdate();b.updateInfoPtr()},postUpdate:function(){},update:function(){var b=this},pos:function(b){if(b==undefined){return this.P.pos}else{return this.P.pos.setV(b)}},rot:function(b){if(b==undefined){return this.P.rot}else{this.TRS.rot=true;this.P.rot=b;return this}},scl:function(b){if(b==undefined){return this.P.scl}else{this.TRS.scl=true;return this.P.scl.setV(b)}},move:function(b){this.P.pos.add(b)},rotate:function(b){this.TRS.rot=true;this.P.rot+=b},scale:function(b){this.TRS.scl=true;if($.atype(b)=="vVec"){this.P.scl.scale(b)}else{this.P.scl.mult(b)}},containsPnt:function(b){return false},rectHitTest:function(b){var c=this;if(b.x>=0){if(b.y>=0){if(b.x<c.P.width){if(b.y<c.P.height){return true}}}}return false},circleHitTest:function(b){var c=this;return(b.lSQ()<=(c.P.r*c.P.r))},ellipseHitTest:function(b){var c=this;return((b.x*b.x)/(c.P.ra*c.P.ra)+(b.y*b.y)/(c.P.rb*c.P.rb)<=1)},rectHitTestTol:function(c,b){var d=this;if(!b){var b=10}if(c.x>=-b){if(c.y>=-b){if(c.x<=d.P.width+b){if(c.y<=d.P.height+b){return true}}}}return false},canvasToLocal:function(b){var c=this.gTF.apply_as_inverse(b);if(c==null){$.C("NULL!!!")}return c},canvasToParent:function(b){return(this.pO)?this.pO.canvasToLocal(b.copy()):null},localToParent:function(b){return this.TF.apply_v(b||vVec())},localToCanvas:function(b){return this.gTF.apply_v(b||vVec())},localToScreen:function(b){var c=this;return c.localToCanvas(b||vVec()).add(c.cnvs.screenPos)},hasEvent:function(b){var c=this;if($.atype(b)=="vEvent"){b=b.etype}if(c[b]){return true}if(c.handlers[b]&&c.handlers[b].length>0){return true}return false},bindEvent:function(c,b){var d=this;if(d.handlers[c]==undefined){d.handlers[c]=Array()}d.handlers[c].push(b)},unbindEvent:function(c,b){var d=this;if(!d.hasEvent(c)){return}if(b!=undefined&&d.handlers[c]!=undefined){$.each(d.handlers[c],function(e,f){if(b==f){d.handlers[c].splice(e,1);return false}})}else{if(d.handlers[c]!=undefined){d.handlers[c].splice(0,d.handlers[c].length)}}},unbindAllEvents:function(){var b=this;b.handlers={}},callEvent:function(b,c){var d=this;if(c==undefined){var c=b.etype}if(!d.hasEvent(c)){return}if(d[c]){d[c](b)}if(d.handlers[c]&&d.handlers[c].length>0){$.each(d.handlers[c],function(e,f){f.call(d,b)})}},attachDefaultHandlers:function(){var b=this;if(!b.$class.defaultHandlersMade&&b.eventDefaults){b.$class.defaultHandlers=b.eventDefaults();b.$class.defaultHandlersMade=true}$.each(b.$class.defaultHandlers,function(c,d){b.bindEvent(c,d)})},handleEventTree:function(b){var c=this;var d=false;c.cO.each_reverse(function(f,e){d=e.handleEventTree(b);return(d)?false:true});if(!(d==false||d==null)){return d}return c.handleEvent(b)},handleEvent:function(b,d){var c=this;if(c.hasEvent(b)){if(b.spatial){b.lpos=c.canvasToLocal(b.gpos);if(c.containsPnt(b.lpos)||d){c.callEvent(b);return true}else{if(b.etype=="testForFocus"&&c.cnvs.eventRouter.focus==c){c.cnvs.eventRouter.focus=null;c.handleFocusLeaves(b)}}}else{c.callEvent(b)}}else{return false}},_mousedown:function(b){var c=this;c.lastdownT=millis();c.lastdownPos.setV(b.gpos);if(c.draggable){c.grabPnt.setV(c.localToParent(b.lpos).sub(c.P.pos));if(c.cnvs.eventRouter.dragFocus==null){c.UserControlled=true;c.callEvent(b,"startDrag");c.cnvs.eventRouter.dragFocus=c}}c.callEvent(b,"mousedown")},_mouseup:function(b){var c=this;c.callEvent(b,"mouseup");if(c.cnvs.eventRouter.dragFocus==c){c.UserControlled=false;c.callEvent(b,"endDrag");c.cnvs.eventRouter.dragFocus=null}c.handleClicking(b)},_mousemove:function(b){var c=this;c.callEvent(b,"mousemove")},handleClicking:function(b){var c=this;clearTimeout(c.clickCB);if(millis()-c.lastdownT<c.clickT){if(c.lastdownPos.subN(b.gpos).lngthSquared()>100){return}if(c.hasEvent("dblclick")){if(millis()-c.lastClickT<c.dblclickT){c.callEvent(b,"dblclick")}else{c.lastClickT=millis();if(c.hasEvent("click")){c.clickCB=setTimeout(function(){c.callEvent(b,"click")},c.clickT)}}}else{c.callEvent(b,"click")}}},_keydown:function(b){var c=this;c.callEvent(b,"keydown")},_keyup:function(b){var c=this;c.callEvent(b,"keyup")},_keypress:function(b){var c=this;c.callEvent(b,"keypress")},testForFocus:function(b){var c=this;if(c.mouseInside==false){c.mouseInside=true;if(b.mDown){c.callEvent(b,"dragenter")}else{c.callEvent(b,"mouseenter")}if(c.cnvs.eventRouter.focus!=null&&c.cnvs.eventRouter.focus!=c){c.cnvs.eventRouter.focus.handleFocusLeaves(b)}c.cnvs.eventRouter.focus=c}},handleFocusLeaves:function(b){var c=this;c.mouseInside=false;if(!b.mDown){c.callEvent(b,"mouseleave")}else{c.callEvent(b,"dragleave")}},_drag:function(b){var c=this;if(!c.draggable){return}c.P.pos.setV(c.localToParent(b.lpos).sub(c.grabPnt));c.callEvent(b,"drag")},attachToInfoPtr:function(){var b=this;b.cnvs.inspector.pos(b.localToCanvas(b.offsetInfoPtr()));b.cnvs.inspector.attach(b)},updateInfoPtr:function(){var b=this;if(b.infoPtr){b.infoPtr.pos(b.localToCanvas(b.offsetInfoPtr()))}},offsetInfoPtr:function(){return vVec(0,0)}})}).call(this);(function(){var a=this;a.vObj=vObjBase.$extend({__classvars__:{aType:"vObj"},initialize:function(){var b=this;b.$super();b.msgBox=new Array();b.msgHandlers={};b.msgWall={};b.fList=new Array();b.rList=new Array();b.fadeOn=false;b.fadeTgt=1;b.fadeDiff=0;b.fadeStartVal=0;b.fadeStartTime=0;b.fadeDuration=0;b.fadeFnc="linearTween"},renderBefore:function(){var b=this;b.runR()},renderMsgWall:function(){var b=this;b.ctx.fillStyle="white";b.ctx.fillText($.dump(b.msgWall),0,0)},runR:function(){var b=this;if(b.rList.length==0){return}$.each(b.rList,function(d,c){try{if(c.f(b,c.dat||null)){b.remR(c)}}catch(f){}})},addR:function(d,c){var b=this;b.rList.push({dat:c||{},f:d})},remR:function(b){var c=this;if($.atype(b)=="function"){$.each(c.rList,function(e,d){if(d.f==b){b=d}return false})}else{c.rList.remove(b)}},postUpdate:function(){var b=this;b.processMsgBox();if(b.fadeOn){b.handleFade()}b.runA()},update:function(){},fade:function(e,b,c){var d=this;d.fadeOn=true;d.fadeTgt=e||0;d.fadeDiff=d.fadeTgt-d.alpha();d.fadeStartVal=d.alpha();d.fadeStartTime=millis();d.fadeDuration=b||1000;d.fadeFnc=c||"linearTween"},handleFade:function(){var b=this;if(Math.abs(b.alpha()-b.fadeTgt)<0.01){b.alpha(b.fadeTgt);b.fadeOn=false}else{var c=(millis()-b.fadeStartTime)/b.fadeDuration;c=Math[b.fadeFnc](c,0,1,1);b.alpha(b.fadeStartVal+b.fadeDiff*c);if(b.fadeDiff>0&&b.alpha()>b.fadeTgt){b.alpha(b.fadeTgt)}else{if(b.fadeDiff<0&&b.alpha()<b.fadeTgt){b.alpha(b.fadeTgt)}}}},runA:function(){var b=this;if(b.fList.length==0){return}$.each(b.fList,function(d,c){try{if(c.f(b,c.dat||null)){b.remA(c)}}catch(f){}})},addA:function(d,c){var b=this;b.fList.push({dat:c||{},f:d})},remA:function(b){var c=this;if($.atype(b)=="function"){$.each(c.fList,function(e,d){if(d.f==b){b=d}return false})}else{c.fList.remove(b)}},addMsgHandler:function(c,b){Q.msgHandlers[c]=b},removeMsgHandler:function(b){if(Q.msgHandlers[b]){delete Q.msgHandlers[b]}},insertMsg:function(c){var b=this;b.msgBox.push(c);c.tgt=b},processMsgBox:function(){var b=this;while(b.msgBox.length>0){var c=b.msgBox.pop();if(b.msgHandlers[c.msgText]!=undefined){b.msgHandlers[c.msgText].call(b,c)}if(c.action){c.action.call(c,b)}c.del()}},mWadd:function(b){var c=this;c.msgWall[b]=1},mWhas:function(b){var c=this;return(c.msgWall[b]!=undefined)?true:false},mWclear:function(b){var c=this;c.msgWall={}}})}).call(this);(function(){var a=this;a.vCanvas=aObj.$extend({__classvars__:{aType:"vCanvas"},initialize:function(){var b=this;b.$super();b.$cnvs=null;b.ctx=null;b.rndr=null;b.P.width=0;b.P.height=0;b.screenPos=new vVec();b.eventRouter=null;b.fps=0;b.fpslastUpdate=0;b.fpsFilter=50;b.framecount=0;b.alpha=1;b.alphaTree=1;b.inspector=null},attachToCanvas:function(b){var c=this;c.$cnvs=b;c.ctx=c.$cnvs[0].getContext("2d");c.rndr=vCanvasRenderer.bindCtx(c.ctx);c.P.width=c.$cnvs.w();c.P.height=c.$cnvs.h();c.screenPos.setV(c.$cnvs.xy());$(window).resize(function(){c.screenPos.setV(c.$cnvs.xy())});c.eventRouter=new vEventRouter();c.eventRouter.cnvs=c;c.eventRouter.ctx=c.ctx;c.eventRouter.rndr=c.rndr;c.eventRouter.registerForEvents(c.$cnvs);c.$cnvs.mouseleave(function(){c.mouseOverCanvas=false});c.$cnvs.mouseenter(function(){c.mouseOverCanvas=true});c.eachC(function(d,f){f.setCnvs(c)});c.inspector=new jInspector();c.addC(c.inspector)},loopstep:function(){var b=this;b.renderRefresh();b.eventRouter.processEvtQ();b.updateTree();b.renderTree();b.calculateFps();update_millis()},calculateFps:function(){var c=this;var b=1000/(millis()-c.fpslastUpdate);c.fps+=(b-c.fps)/c.fpsFilter;c.fpslastUpdate=millis();c.framecount++},attachToFps:function(c){var b=this;setInterval(function(){c.html(b.fps.toFixed(1)+"fps")},1000)},addC:function(b){this.$super(b);b.setCnvs(this)},renderTree:function(){var b=this;b.render();var c=new vTransform2D().setI();b.eachC(function(d,f){f.renderTree(c)});b.renderTop()},render:function(){},renderTop:function(){var b=this;if(b.mouseOverCanvas){b.renderMouse()}},renderMouse:function(){var b=this;b.rndr.circle(b.eventRouter.mPos,3,"red")},renderRefresh:function(){var b=this;b.ctx.clearRect(0,0,b.P.width,b.P.height);b.rndr.rect(vVec(),b.P.width,b.P.height,"rgb(150,150,150)")},updateTree:function(){var b=this;b.update();b.eachC(function(c,d){d.updateTree()})},update:function(){},canvasToLocal:function(b){return b}})}).call(this);(function(){var a=this;a.vEventRouter=aObj.$extend({__classvars__:{aType:"vEventRouter"},initialize:function(){var b=this;b.$super();b.$cnvs=null;b.cnvs=null;b.ctx=null;b.rndr=null;b.evtQ=Array();b.mDown=false;b.mPos=vVec();b.mouseOverCanvas=true;b.focus=null;b.dragFocus=null},registerForEvents:function(c){var b=this;b.$cnvs=c;$.each(["mousedown","mouseup","mousemove"],function(e,d){b.$cnvs.bind(d,function(f){f.pageX-=b.cnvs.screenPos.x;f.pageY-=b.cnvs.screenPos.y;b.evtQ.push(f)})});$.each(["touchstart","touchend","touchmove"],function(e,d){b.$cnvs.bind(d,function(f){f.preventDefault();if(f.type!="touchend"){f.pageX=f.originalEvent.touches[0].pageX-b.cnvs.screenPos.x;f.pageY=f.originalEvent.touches[0].pageY-b.cnvs.screenPos.y}b.evtQ.push(f)})});$.each(["keydown","keyup","keypress"],function(e,d){$(document).bind(d,function(f){f.pageX-=b.cnvs.screenPos.x;f.pageY-=b.cnvs.screenPos.y;b.evtQ.push(f)})})},setDragFocus:function(d){var b=this;b.cnvs.eventRouter.focus=d;b.cnvs.eventRouter.dragFocus=d;var c={pageX:b.mPos.x,pageY:b.mPos.y};b.injectEvent(c,"startDrag",d)},processEvtQ:function(){var b=this;while(b.evtQ.length!=0){var c=b.evtQ.pop();if(b["_"+c.type]!=undefined){b["_"+c.type](c)}}},injectEvent:function(f,c,g){var d=this;var b=d.packageEvent(f,c);if(!g){d.cnvs.eachC(function(h,e){return e.handleEventTree(b)})}else{g.handleEvent(b,true)}},packageEvent:function(f,c){var d=this;var b=new vEvent(f);b.etype=c;b.mDown=d.mDown;if(c!="_keydown"&&c!="_keydown"&&c!="_keypress"){b.spatial=true}b.gpos.setXYZ(f.pageX,f.pageY);return b},_mousedown:function(c){var b=this;b.mDown=true;b.injectEvent(c,"_mousedown")},_mouseup:function(c){var b=this;b.mDown=false;if(b.dragFocus!=null){b.injectEvent(c,"_mouseup",b.dragFocus);b.dragFocus=null}else{b.injectEvent(c,"_mouseup")}},_mousemove:function(c){var b=this;b.mPos.setEVT(c);b.injectEvent(c,"_mousemove");this.testForFocus()},_touchstart:function(b){this._mousedown(b)},_touchend:function(b){this._mouseup(b)},_touchmove:function(b){this._mousemove(b)},_keydown:function(c){var b=this;b.injectEvent(c,"_keydown")},_keyup:function(c){var b=this;b.injectEvent(c,"_keyup")},_keypress:function(c){var b=this;b.injectEvent(c,"_keypress")},testForFocus:function(){var b=this;if(b.dragFocus==null){var c={pageX:b.mPos.x,pageY:b.mPos.y};b.injectEvent(c,"testForFocus")}else{b._drag()}},_drag:function(){var b=this;var c={pageX:b.mPos.x,pageY:b.mPos.y};if(b.dragFocus!=null){this.injectEvent(c,"_drag",b.dragFocus)}}})}).call(this);(function(){var a=this;a.vRect=vObj.$extend({__classvars__:{aType:"vRect"},initialize:function(b){var c=this;c.$super();c.P.fillcolor=new vColor(200,0,0,0.75);c.P.strokecolor=new vColor(200,0,200,0.5);c.P.width=50;c.P.height=50;c.renderStroke=false},i:function(c,b){var d=this;d.P.width=c||25;d.P.height=b||d.P.width;return d},render:function(){var b=this;b.rndr.rect(vVec(),b.P.width,b.P.height,b.P.fillcolor.RGBA())},update:function(){var b=this},containsPnt:function(b){var c=this;return c.rectHitTest(b)}})}).call(this);(function(){var a=this;a.vEllipse=vObj.$extend({__classvars__:{aType:"vEllipse"},initialize:function(b){var c=this;c.$super();c.P.fillcolor=new vColor(200,200,0,0.75);c.P.strokecolor=new vColor(200,0,200,0.75);c.P.ra=25;c.P.rb=25;c.renderStroke=false},i:function(d,c){var b=this;b.P.ra=d||25;b.P.rb=c||b.P.ra;return b},render:function(){var b=this;b.rndr.ellipse(vVec(),b.P.ra,b.P.rb,b.P.fillcolor.RGBA())},update:function(){var b=this},containsPnt:function(b){var c=this;return c.ellipseHitTest(b)}})}).call(this);(function(){var a=this;a.vImage=vObjBase.$extend({__classvars__:{aType:"vImage"},initialize:function(b){var c=this;c.$super();c.P.imgSrc=null;c.img=new Image();c.img_loaded=false;c.P.width=10;c.P.height=10},i:function(b){var c=this;c.imgSrc(b);return c},imgSrc:function(b){var c=this;if(b==undefined){return c.P.imgSrc}else{b=b.replace("\n","");if(c.P.imgSrc==b){return this}c.P.imgSrc=b;c.img.src=b;c.img_loaded=false;c.img.onload=function(){c.img_loaded=true;c.P.width=c.img.width;c.P.height=c.img.height;c.onImageLoad()};c.img.onerror=function(){c.handleLoadError()};return this}},onImageLoad:function(){C("Image Loaded!")},handleLoadError:function(){C("Image loading error")},render:function(){var b=this;if(b.img_loaded){b.ctx.drawImage(b.img,0,0,b.P.width,b.P.height)}},update:function(){var b=this},containsPnt:function(b){var c=this;return c.rectHitTest(b)}})}).call(this);(function(){var a=this;a.vTextBox=vObj.$extend({__classvars__:{aType:"vTextBox"},initialize:function(){var b=this;b.$super();b.P.text="Hello World!";b.font=null;b.P.fontName="sans-serif";b.P.fontSize=12;b.P.fontMetric="px";b.P.fontColor=new vColor();b.P.width=0;b.P.height=0},postInitialize:function(){var b=this;b.flattenFont();b.text(b.P.text)},i:function(c){var b=this;b.text(c,false);return b},setCnvs:function(c){var b=this;b.$super(c);b.calculateDimensions()},text:function(d,c){var b=this;if(d==undefined){return b.P.text}else{b.P.text=d;b.calculateDimensions()}},calculateDimensions:function(){var c=this;if(!c.ctx){return}c.ctx.save();c.applyFont();var b=c.ctx.measureText(c.P.text);c.P.width=b.width;c.ctx.restore();c.P.height=c.P.fontSize},flattenFont:function(){var b=this;b.font=b.P.fontSize+b.P.fontMetric+" "+b.P.fontName;b.calculateDimensions()},applyFont:function(){var b=this;if(b.font){b.ctx.font=b.font}},fontName:function(c){var b=this;if(c==undefined){return b.P.fontName}else{b.P.fontName=c;b.flattenFont()}},fontSize:function(b){var c=this;if(b==undefined){return c.P.fontSize}else{c.P.fontSize=b;c.flattenFont()}},fontMetric:function(b){var c=this;if(b==undefined){return c.P.fontMetric}else{c.P.fontMetric=b;c.flattenFont()}},render:function(){var b=this;b.applyFont();b.ctx.fillStyle=b.P.fontColor.RGBA();b.ctx.fillText(b.P.text,0,0)},update:function(){var b=this},containsPnt:function(b){var c=this;if(b.x>=0){if(b.y>=0){if(b.x<c.P.width){if(b.y<c.P.height){return true}}}}return false}})}).call(this);(function(){var a=this;a.j$=aObj.$extend({__classvars__:{aType:"j$"},initialize:function(){var b=this;b.$super();b.$e=null;b.boundObj=null;b.P.pos=new vVec();b.visible=true;b.P.boundOffset=new vVec();b.ctx=null;b.cnvs=null;b.rndr=null;b.initializeHTML()},initializeHTML:function(){var b=this;b.$e=$("<div>").appendTo("#holder");b.$e.mousemove(function(){if(b.cnvs){b.cnvs.$cnvs.trigger("mousemove")}})},hide:function(){var b=this;b.$e.hide();b.visible=false},show:function(){var b=this;b.$e.show();b.visible=true},toggle:function(c){var b=this;b.visible=c||!b.visible;b.$e.toggle(b.visible)},setCnvs:function(c){var b=this;b.cnvs=c;b.ctx=(b.cnvs)?b.cnvs.ctx:null;b.rndr=(b.cnvs)?b.cnvs.rndr:null;b.cO.each(function(d){if(d.setCnvs){d.setCnvs(c)}})},pos:function(b){var c=this;if(b!=undefined){c.$e.xy(b.addN(c.P.pos))}},update:function(){var b=this;if(b.boundObj!=null&&b.visible){b.pos(b.boundObj.localToScreen(vVec()).addN(b.P.boundOffset))}},updateTree:function(){this.update()},renderTree:function(){this.render()},render:function(){},handleEventTree:function(){return false},bindToObj:function(c){var b=this;b.unbind();if(c){b.boundObj=c}},unbind:function(){var b=this;b.boundObj=null},ele:function(b,j,c,d,f){var g=this;var h=$("<"+b+">");if(j){h.attr("id",j)}if(c){h.addClass(c)}if(d){if(b=="input"||b=="textarea"){h.val(d)}else{h.html(d)}}return h.appendTo(f||g.$e)}})}).call(this);(function(){var a=this;a.jUi=j$.$extend({__classvars__:{aType:"jUi"},initialize:function(){var b=this;b.$super();b.$dflt=b.$e;b.baseBttnCls="button wickk-icon";b.dfltInputTxtClr="#777";b.dfltInputTxtClrEdit="red"},dflt$:function(c){var b=this;if(c==undefined){return b.$dflt}else{b.$dflt=$(c)}},cast:function(c,b){if(c=="string"){return b}if(c=="int"){return parseFloat(b)}if(c=="float"){return parseFloat(b)}else{return b}},createUiPanel:function(b,d){var c=this;return c.ele("div",null,"uiContainer "+b||"",null,d||c.$dflt)},createUiTitle:function(c,b,e){var d=this;return d.ele("div",null,"uiTitle "+b||"",c,e||d.$dflt)},createTextButton:function(b){var c=this;if(!b){return null}var d=c.ele("span",null,b.baseClass,b.html,b.container||c.$dflt);if(b.onClick){d.click(function(){b.onClick(this)})}if(b.onDblClick){d.dblclick(function(){b.onDblClick(this)})}return d},createStateTextButton:function(b){var c=this;if(!b){return null}var d=c.ele("span",null,b.baseClass,b.html,b.container||c.$dflt);d.addClass((b.tgt[b.vr])?b.tIcon:b.fIcon);d.click(function(){b.tgt[b.vr]=!b.tgt[b.vr];$(this).toggleClass(b.tClass,b.tgt[b.vr]);$(this).toggleClass(b.fClass,!b.tgt[b.vr]);if(b.onClick){b.onClick(this)}});return d},createIconButton:function(b){var c=this;if(!b){return null}var d=$("<div>").addClass(b.baseIcon||c.baseBttnCls).addClass(b.Icon||"").appendTo(b.container||c.$dflt);if(b.onClick){d.click(function(){b.onClick(this)})}if(b.onDblClick){d.dblclick(function(){b.onDblClick(this)})}return d},createStateIconButton:function(b){var c=this;if(!b){return null}var d=$("<div>").addClass(b.baseIcon||c.baseBttnCls).appendTo(b.container||c.$dflt);d.addClass((b.tgt[b.vr])?b.tIcon:b.fIcon);d.click(function(){b.tgt[b.vr]=!b.tgt[b.vr];$(this).toggleClass(b.tIcon,b.tgt[b.vr]);$(this).toggleClass(b.fIcon,!b.tgt[b.vr]);if(b.onClick){b.onClick(this)}});return d},createStringAttr:function(b){var d=this;if(!b){return}var c=d.ele("div",null,null,null,b.container||d.$dflt);if(b.title){d.ele("div",null,"attrTitle",b.title,c)}return d.ele("textarea",b.id,"msgText",null,c)},wireStringAttr:function(c,d,b){var e=this;if(!b){return}c.val(b.tgt.inP(b.vr));c.blur(function(){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr,e.cast(d,$(this).val()))});c.keydown(function(f){if(f.which==13){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr,e.cast(d,$(this).val()))}else{$(this).css("color",b.editColor||e.dfltInputTxtClrEdit)}})},createNumAttr:function(b){var d=this;if(!b){return}var c=d.ele("div",null,null,null,b.container||d.$dflt);if(b.title){d.ele("div",null,"attrTitle",b.title,c)}return d.ele("input",b.id,"attrInput",null,c)},wireNumAttr:function(c,d,b){var e=this;if(!b){return}c.val(b.tgt.inP(b.vr));c.blur(function(){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr,e.cast(d,$(this).val()))});c.keydown(function(f){if(f.which==13){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr,e.cast(d,$(this).val()))}else{$(this).css("color",b.editColor||e.dfltInputTxtClrEdit)}});e.addNumericalIncrements(c,b)},addNumericalIncrements:function(e,d){var f=this;var c=e.parent();var b;f.ele("span",null,"minus","-",c).click(function(){e.val(f.cast("float",e.val())-f.cast("float",b.val())).trigger("blur")});f.ele("span",null,"plus","+",c).click(function(){e.val(f.cast("float",e.val())+f.cast("float",b.val())).trigger("blur")});b=f.ele("input",null,"increment",d.deltaInc||1,c)},createVecAttr:function(b){var d=this;if(!b){return}var c=d.ele("div",null,null,null,b.container||d.$dflt);if(b.title){d.ele("div",null,"attrTitle",b.title,c)}$.each(["x","y","z"],function(f,e){d.ele("input",e,"shortattrInput",null,c)});return c},wireVecAttr:function(c,d,b){var e=this;if(!b){return}$.each(["x","y","z"],function(h,g){var f=c.find("#"+g).val(b.tgt.inP(b.vr)[g]);f.blur(function(){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr)[g]=e.cast("float",$(this).val())});f.keydown(function(j){if(j.which==13){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr)[g]=e.cast("float",$(this).val())}else{$(this).css("color",b.editColor||e.dfltInputTxtClrEdit)}})})},createColorAttr:function(b){var d=this;if(!b){return}var c=d.ele("div",null,null,null,b.container||d.$dflt);if(b.title){d.ele("div",null,"attrTitle",b.title,c)}$.each(["r","g","b","a"],function(f,e){d.ele("input",e,"veryshortattrInput",null,c)});return c},wireColorAttr:function(c,d,b){var e=this;if(!b){return}$.each(["r","g","b","a"],function(h,g){var f=c.find("#"+g).val(b.tgt.inP(b.vr)[g]);f.blur(function(){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr)[g]=e.cast("float",$(this).val());b.tgt.inP(b.vr).flatten()});f.keydown(function(j){if(j.which==13){$(this).css("color",b.staticColor||e.dfltInputTxtClr);b.tgt.inP(b.vr)[g]=e.cast("float",$(this).val());b.tgt.inP(b.vr).flatten()}else{$(this).css("color",b.editColor||e.dfltInputTxtClrEdit)}})})},createBooleanAttr:function(b){var h=this;if(!b){return}var g=$("<div>").appendTo(b.container||h.$dflt);if(b.id){g.attr("id",id)}if(b.title){var f=$("<div>").addClass("attrTitle").html(b.title).appendTo(g)}var e=h.ele("span",null,"boolAttr","true",g);var c=h.ele("span",null,"boolAttr","false",g);var d=function(){e.toggleClass("boolOn",b.tgt.inP(b.vr));c.toggleClass("boolOn",!b.tgt.inP(b.vr))};d();e.click(function(){b.tgt.inP(b.vr,true);d()});c.click(function(){b.tgt.inP(b.vr,false);d()});return g}})}).call(this);(function(){var a=this;a.jInspector=jUi.$extend({__classvars__:{aType:"jInspector"},initialize:function(){var b=this;b.$super();b.tgt=null;b.ref_tgt=null;b.tgtScreenPos=vVec();b.immediateApply=false;b.pinned=true;b.renderOverlayMask=true;b.tgtFlagColor="rgba(0,255,0,0.75)";b.ref_tgtFlagColor="rgba(0,0,255,0.75)";b.$e.addClass("jInspector");b.buildUiPanels();b.buildButtons();b.hide()},buildUiPanels:function(){var b=this;b.dflt$(b.$e);b.createUiTitle("CURRENT TARGET");b.$idPanel=b.createUiPanel("attrPanel");b.$id=$("<div>").addClass("idString").appendTo(b.$idPanel);b.createUiTitle("GRAPH ( Q.pO + Q.cO )");b.$parentPanel=b.createUiPanel("attrPanel");b.$parent=$("<div>").addClass("idStringLink").appendTo(b.$parentPanel);b.$childrenPanel=b.createUiPanel("attrPanel");b.createUiTitle("LINKS ( Q.U )");b.$linksPanel=b.createUiPanel("attrPanel");b.createUiTitle("ATTRIBUTES ( Q.P )");b.$buttonPanel=b.createUiPanel("buttonPanel");b.$attrPanel=b.createUiPanel("attrPanel")},buildButtons:function(){var b=this;b.dflt$(b.$buttonPanel);b.createTextButton({html:"P > [ ]",baseClass:"textButton",onClick:function(){if(b.tgt!=null){b.ref_tgt=b.tgt}}});b.createTextButton({html:"[ ] > P",baseClass:"textButton",onClick:function(){b.applyRefToTgt()}});b.createStateTextButton({html:"[ ] >> P",baseClass:"textButton",tClass:"textButtonRed",fClass:"textButton",tgt:b,vr:"immediateApply"})},toggle:function(c){var b=this;b.$super(c);b.renderOverlayMask=b.visible},update:function(){var b=this;b.$super();if(b.visible&&b.renderOverlayMask){b.renderOverlay()}},pos:function(b){var c=this;c.tgtScreenPos.setV(b);if(!c.pinned){c.$super(b)}},applyRefToTgt:function(){var b=this;if(b.tgt==null||b.ref_tgt==null){return}if($.atype(b.tgt)==$.atype(b.ref_tgt)){var c=$.extend({},b.ref_tgt.P);$.each(["pos","rot","scl"],function(e,d){if(d in c){delete c[d]}});b.tgt.setP(c)}},renderOverlay:function(){var b=this;if(b.ctx==null||b.tgt==null){return}b.renderCross(b.tgtScreenPos,b.tgtFlagColor);if(b.ref_tgt!=null){b.renderCross(b.ref_tgt.localToCanvas(b.ref_tgt.offsetInfoPtr()),b.ref_tgtFlagColor)}},renderCross:function(e,d){var g=this;g.ctx.beginPath();g.ctx.fillStyle=d||"rgba(0,255,0,0.5)";var h=10,c=4,b=15;g.ctx.rect(e.x-c/2,e.y-(h+b),c,b);g.ctx.rect(e.x+h,e.y-c/2,b,c);g.ctx.rect(e.x-c/2,e.y+(h),c,b);g.ctx.rect(e.x-(h+b),e.y-c/2,b,c);g.ctx.fill();g.ctx.closePath()},attach:function(c){var b=this;b.detach();if(!c){return}b.tgt=c;c.infoPtr=b;gP=c;if(b.immediateApply){b.applyRefToTgt()}b.$id.html(b.tgt.id());b.buildSceneGraphPanel(b.tgt);b.buildLinksPanel(b.tgt);b.buildAttrPanel(b.tgt)},detach:function(){var b=this;if(b.tgt!=null){b.tgt.infoPtr=null;b.tgt=null}},buildSceneGraphPanel:function(c){var b=this;b.$parent.html("pO: "+c.getpOid()).click(function(){b.attach(c.pO)});b.$childrenPanel.empty();if(c.numC()>0){c.eachC(function(d,e){b.ele("div",null,"idStringLink","cO["+d+"]: "+e.id(),b.$childrenPanel).click(function(){b.attach(e)})})}else{b.ele("div",null,"noChildren","no children",b.$childrenPanel)}},buildLinksPanel:function(d){var c=this;c.$linksPanel.empty();if(d.U==undefined){return}var b=0;$.each(d.U,function(f,e){if(d.U[f]==null){c.ele("div",null,"noChildren",f+": null",c.$linksPanel)}else{if($.atype(d.U[f])=="aList"){if(d.U[f].size()>0){d.U[f].each(function(h,g){if(g!=null){c.ele("div",null,"idStringLink",f+"["+h+"]: "+g.id(),c.$linksPanel).click(function(){c.attach(g)})}else{c.ele("div",null,"noChildren",f+"["+h+"]: null",c.$linksPanel)}})}else{c.ele("div",null,"noChildren",f+": []",c.$linksPanel)}}else{var e=d.U[f];c.ele("div",null,"idStringLink",f+": "+e.id(),c.$linksPanel).click(function(){c.attach(e)})}}b++});if(b==0){c.ele("div",null,"noChildren","no links",c.$linksPanel)}},addAttr:function(e,d,b,c){var f=this;if(!e||!$.isDef(d)||!$.isDef(b)){return}if(!c){var c={}}switch($.type(b)){case"boolean":f.createBooleanAttr({title:d,tgt:e,vr:d,});break;case"string":var g=f.createStringAttr({title:d});f.wireStringAttr(g,$.atype(b),{tgt:e,vr:d,deltaInc:c.step||1});break;case"number":var g=f.createNumAttr({title:d});f.wireNumAttr(g,$.atype(b),{tgt:e,vr:d,deltaInc:c.step||1});break;case"object":if($.atype(b)=="vVec"){var g=f.createVecAttr({title:d});f.wireVecAttr(g,$.atype(b),{tgt:e,vr:d,deltaInc:c.step||1})}else{if($.atype(b)=="vColor"){var g=f.createColorAttr({title:d});f.wireColorAttr(g,$.atype(b),{tgt:e,vr:d,deltaInc:c.step||1})}}break}},buildAttrPanel:function(b){var c=this;c.$attrPanel.empty();c.dflt$(c.$attrPanel);$.each(b.P,function(e,d){c.addAttr(b,e,d)})}})}).call(this);